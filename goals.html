<!DOCTYPE html>
<html lang="en" class="bg-gray-950 text-white">
  <head>
    <meta charset="UTF-8" />
    <title>Finance Tracker - Goals</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body class="flex h-screen overflow-hidden">
    <!-- Sidebar -->
    <aside class="w-20 bg-gray-900 flex flex-col items-center py-6 space-y-6">
      <a href="dashboard.html" class="nav-icon">🏠</a>
      <a href="goals.html" class="nav-icon active-nav">🎯</a>
      <a href="emi.html" class="nav-icon">📆</a>
      <a href="investments.html" class="nav-icon">📊</a>
      <button onclick="logout()" class="mt-auto nav-icon">🚪</button>
    </aside>

    <main class="flex-1 p-6 overflow-y-auto">
      <h1 class="text-2xl font-bold mb-6">Your Financial Goals 🎯</h1>

      <form id="goal-form" class="grid sm:grid-cols-3 gap-4 mb-8">
        <input type="text" id="goal-name" class="input" placeholder="Goal name" />
        <input type="number" id="goal-amount" class="input" placeholder="Target amount ₹" />
        <button type="submit" class="btn bg-purple-600 col-span-full sm:col-span-1">Add Goal</button>
      </form>

      <ul id="goal-list" class="space-y-4"></ul>
    </main>

    <script>
      const username = localStorage.getItem("loggedInUser");
      if (!username) location.href = "index.html";

      const form = document.getElementById("goal-form");
      const list = document.getElementById("goal-list");
      let goals = JSON.parse(localStorage.getItem(`${username}_goals`) || "[]");

      function updateGoals() {
        list.innerHTML = "";
        goals.forEach((goal, index) => {
          const li = document.createElement("li");
          li.className = "bg-gray-800 p-4 rounded flex justify-between";
          li.innerHTML = `
            <div>
              <strong>${goal.name}</strong><br />
              <span class="text-sm text-gray-400">₹${goal.amount}</span>
            </div>
            <button onclick="deleteGoal(${index})" class="text-red-500">🗑️</button>
          `;
          list.appendChild(li);
        });
      }

      function deleteGoal(index) {
        goals.splice(index, 1);
        localStorage.setItem(`${username}_goals`, JSON.stringify(goals));
        updateGoals();
      }

      form.addEventListener("submit", (e) => {
        e.preventDefault();
        const name = document.getElementById("goal-name").value.trim();
        const amount = +document.getElementById("goal-amount").value;

        if (!name || !amount) return alert("Fill all fields");

        goals.push({ name, amount });
        localStorage.setItem(`${username}_goals`, JSON.stringify(goals));
        form.reset();
        updateGoals();
      });

      updateGoals();

      function logout() {
        localStorage.removeItem("loggedInUser");
        location.href = "index.html";
      }
    </script>
  </body>
</html>
